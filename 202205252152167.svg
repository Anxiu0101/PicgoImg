<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="495px" preserveAspectRatio="none" style="width:1317px;height:495px;background:#FFFFFF;" version="1.1" viewBox="0 0 1317 495" width="1317px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ggo725wsfpku" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="40" lengthAdjust="spacing" textLength="331" x="489.75" y="53.5234">User Login Service</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="394" x2="394" y1="153.9219" y2="410.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="470.5" x2="470.5" y1="153.9219" y2="410.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="766" x2="766" y1="153.9219" y2="410.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1211.5" x2="1211.5" y1="153.9219" y2="410.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1272.5" x2="1272.5" y1="153.9219" y2="410.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="377" y="150.8457">user</text><ellipse cx="394" cy="79.3125" fill="#FEFECE" filter="url(#f1ggo725wsfpku)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M394,87.3125 L394,114.3125 M381,95.3125 L407,95.3125 M394,114.3125 L381,129.3125 M394,114.3125 L407,129.3125 " fill="none" filter="url(#f1ggo725wsfpku)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="377" y="423.916">user</text><ellipse cx="394" cy="436.9922" fill="#FEFECE" filter="url(#f1ggo725wsfpku)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M394,444.9922 L394,471.9922 M381,452.9922 L407,452.9922 M394,471.9922 L381,486.9922 M394,471.9922 L407,486.9922 " fill="none" filter="url(#f1ggo725wsfpku)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1ggo725wsfpku)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="47" x="445.5" y="117.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="452.5" y="138.8457">client</text><rect fill="#FEFECE" filter="url(#f1ggo725wsfpku)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="47" x="445.5" y="409.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="452.5" y="430.916">client</text><rect fill="#FEFECE" filter="url(#f1ggo725wsfpku)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="54" x="737" y="117.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="744" y="138.8457">server</text><rect fill="#FEFECE" filter="url(#f1ggo725wsfpku)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="54" x="737" y="409.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="744" y="430.916">server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="1193.5" y="150.8457">redis</text><path d="M1194,100.3125 C1194,90.3125 1212,90.3125 1212,90.3125 C1212,90.3125 1230,90.3125 1230,100.3125 L1230,126.3125 C1230,136.3125 1212,136.3125 1212,136.3125 C1212,136.3125 1194,136.3125 1194,126.3125 L1194,100.3125 " fill="#FEFECE" filter="url(#f1ggo725wsfpku)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1194,100.3125 C1194,110.3125 1212,110.3125 1212,110.3125 C1212,110.3125 1230,110.3125 1230,100.3125 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="1193.5" y="423.916">redis</text><path d="M1194,436.9922 C1194,426.9922 1212,426.9922 1212,426.9922 C1212,426.9922 1230,426.9922 1230,436.9922 L1230,462.9922 C1230,472.9922 1212,472.9922 1212,472.9922 C1212,472.9922 1194,472.9922 1194,462.9922 L1194,436.9922 " fill="#FEFECE" filter="url(#f1ggo725wsfpku)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1194,436.9922 C1194,446.9922 1212,446.9922 1212,446.9922 C1212,446.9922 1230,446.9922 1230,436.9922 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="1240.5" y="150.8457">database</text><path d="M1255,100.3125 C1255,90.3125 1273,90.3125 1273,90.3125 C1273,90.3125 1291,90.3125 1291,100.3125 L1291,126.3125 C1291,136.3125 1273,136.3125 1273,136.3125 C1273,136.3125 1255,136.3125 1255,126.3125 L1255,100.3125 " fill="#FEFECE" filter="url(#f1ggo725wsfpku)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1255,100.3125 C1255,110.3125 1273,110.3125 1273,110.3125 C1273,110.3125 1291,110.3125 1291,100.3125 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="1240.5" y="423.916">database</text><path d="M1255,436.9922 C1255,426.9922 1273,426.9922 1273,426.9922 C1273,426.9922 1291,426.9922 1291,436.9922 L1291,462.9922 C1291,472.9922 1273,472.9922 1273,472.9922 C1273,472.9922 1255,472.9922 1255,462.9922 L1255,436.9922 " fill="#FEFECE" filter="url(#f1ggo725wsfpku)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1255,436.9922 C1255,446.9922 1273,446.9922 1273,446.9922 C1273,446.9922 1291,446.9922 1291,436.9922 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#EEEEEE" filter="url(#f1ggo725wsfpku)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1310.5" x="0" y="185.0977"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1310.5" y1="185.0977" y2="185.0977"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1310.5" y1="188.0977" y2="188.0977"/><rect fill="#EEEEEE" filter="url(#f1ggo725wsfpku)" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="134" x="588.25" y="173.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="594.25" y="191.417">User Login Service</text><polygon fill="#A80036" points="459,226.625,469,230.625,459,234.625,463,230.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="394" x2="465" y1="230.625" y2="230.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="401" y="225.7686">operation</text><polygon fill="#A80036" points="754,256.9766,764,260.9766,754,264.9766,758,260.9766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="471" x2="760" y1="260.9766" y2="260.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258" x="478" y="256.1201">POST request with user name and password</text><polygon fill="#A80036" points="1261,287.3281,1271,291.3281,1261,295.3281,1265,291.3281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="766" x2="1267" y1="291.3281" y2="291.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="773" y="286.4717">check username and password</text><polygon fill="#A80036" points="777,317.6797,767,321.6797,777,325.6797,773,321.6797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="771" x2="1272" y1="321.6797" y2="321.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="783" y="316.8232">pass check</text><polygon fill="#A80036" points="1200,348.0313,1210,352.0313,1200,356.0313,1204,352.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="766" x2="1206" y1="352.0313" y2="352.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="422" x="773" y="347.1748">Register user's AccountInfo into redis(Reduce access to SQL databases)</text><polygon fill="#A80036" points="482,383.3828,472,387.3828,482,391.3828,478,387.3828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="476" x2="765" y1="387.3828" y2="387.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="488" y="382.5264">respense with RefreshToken and AccessToken</text><path d="M5,365.0313 L5,391.0313 L462,391.0313 L462,375.0313 L452,365.0313 L5,365.0313 " fill="#FBFB77" filter="url(#f1ggo725wsfpku)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M452,365.0313 L452,375.0313 L462,375.0313 L452,365.0313 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="436" x="11" y="383.5264">RefreshToken has 30 days expiration, AccessToken has 15 mins expiration</text><!--MD5=[3620b80d077bb388f785fb6b73b8a5a1]
@startuml

skinparam titleFontSize 40
skinparam titleFontColor #black
title User Login Service

skinparam backgroundColor #White
skinparam handwritten false

actor user
participant client
participant server
database redis
database database

==User Login Service==
user -> client: operation
client -> server: POST request with user name and password
server -> database: check username and password
database -> server: pass check
server -> redis: Register user's AccountInfo into redis(Reduce access to SQL databases)
server -> client: respense with RefreshToken and AccessToken 
note bottom: RefreshToken has 30 days expiration, AccessToken has 15 mins expiration

@enduml

PlantUML version 1.2022.0(Wed Jan 12 00:16:42 CST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>